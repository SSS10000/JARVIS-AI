<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Realtime Data Share</title>

  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Animate.css -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
</head>
<body class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 min-h-screen flex items-center justify-center p-6">

  <div class="backdrop-blur-lg bg-white/30 shadow-2xl rounded-3xl w-full max-w-5xl p-10 animate__animated animate__fadeIn">
    <h1 class="text-4xl font-extrabold text-center text-white drop-shadow mb-10">âš¡ Realtime Data Share</h1>

    <div class="grid md:grid-cols-2 gap-10">

      <!-- Sender Section -->
      <div class="p-6 rounded-2xl bg-white/70 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <h2 class="text-2xl font-bold text-purple-700 mb-5 flex items-center gap-2">ğŸ“¤ Sender</h2>
        <input type="text" id="senderId" placeholder="Enter Custom ID" class="w-full border rounded-lg p-3 mb-4 focus:ring-2 focus:ring-purple-500">
        <input type="file" id="fileInput" class="w-full mb-4 text-gray-700">
        <button onclick="sendData()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-semibold transition">ğŸš€ Send</button>
        <p id="sendStatus" class="mt-4 text-sm text-gray-800"></p>
      </div>

      <!-- Receiver Section -->
      <div class="p-6 rounded-2xl bg-white/70 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <h2 class="text-2xl font-bold text-green-700 mb-5 flex items-center gap-2">ğŸ“¥ Receiver</h2>
        <input type="text" id="receiverId" placeholder="Enter ID to Receive" class="w-full border rounded-lg p-3 mb-4 focus:ring-2 focus:ring-green-500">
        <button onclick="receiveData()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold transition">ğŸ” Open</button>
        <div id="receiveBox" class="mt-5"></div>
      </div>

    </div>
  </div>

  <script>
    // ğŸ”¹ Firebase Config (replace with your real values)
    const firebaseConfig = {
      apiKey: "AIzaSyXXXXXXX",
      authDomain: "sender-d6c0a.firebaseapp.com",
      databaseURL: "https://sender-d6c0a-default-rtdb.firebaseio.com",
      projectId: "sender-d6c0a",
      storageBucket: "sender-d6c0a.appspot.com",
      messagingSenderId: "19479079444",
      appId: "1:19479079444:web:abcdefg123456",
      measurementId: "G-XXXXXXX"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ğŸ”¹ Send Data
    function sendData() {
      const id = document.getElementById("senderId").value.trim();
      const file = document.getElementById("fileInput").files[0];
      const statusBox = document.getElementById("sendStatus");

      if (!id || !file) {
        alert("âš ï¸ Please enter ID and choose a file!");
        return;
      }

      statusBox.innerHTML = "â³ Uploading file...";

      const reader = new FileReader();
      reader.onload = function(e) {
        const base64Data = e.target.result;
        db.ref("files/" + id).set({
          name: file.name,
          data: base64Data,
          time: new Date().toLocaleString()
        }).then(() => {
          statusBox.innerHTML = `âœ… File <b>${file.name}</b> sent successfully with ID: <b>${id}</b>`;
        }).catch(err => {
          statusBox.innerHTML = "âŒ Error: " + err.message;
        });
      };
      reader.readAsDataURL(file);
    }

    // ğŸ”¹ Receive Data
    function receiveData() {
      const id = document.getElementById("receiverId").value.trim();
      if (!id) {
        alert("âš ï¸ Please enter an ID to receive data!");
        return;
      }

      const box = document.getElementById("receiveBox");
      box.innerHTML = "â³ Fetching data...";

      db.ref("files/" + id).on("value", snapshot => {
        const data = snapshot.val();
        if (data) {
          box.innerHTML = `
            <div class="p-4 bg-white/80 rounded-xl shadow">
              <p class="text-gray-800 mb-2">ğŸ“„ File: <b>${data.name}</b></p>
              <p class="text-sm text-gray-600 mb-3">â± Sent: ${data.time}</p>
              <a href="${data.data}" download="${data.name}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg inline-block">â¬‡ Download</a>
            </div>
          `;
        } else {
          box.innerHTML = "<p class='text-red-600 font-semibold'>âŒ No file found for this ID</p>";
        }
      });
    }
  </script>

</body>
</html>
